<UserControl x:Class="Cooking.Pages.MainPage.MainPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Cooking.Pages.MainPage"
             xmlns:mahapps="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:model="clr-namespace:Data.Model;assembly=Data"
             xmlns:converters="clr-namespace:Cooking.Converters"
             xmlns:icons="http://metro.mahapps.com/winfx/xaml/iconpacks"
             mc:Ignorable="d" 
             mahapps:DialogParticipation.Register="{Binding}"
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.DataContext>
        <local:MainPageViewModel />
    </UserControl.DataContext>

    <UserControl.Resources>
        <converters:IsNullToVisibilityConverter x:Key="isNullConverter" NullVisibility="Visible" NotNullVisibility="Collapsed" />
        <converters:IsNullToVisibilityConverter x:Key="isNotNullConverter" NullVisibility="Collapsed" NotNullVisibility="Visible" />
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition />
            <RowDefinition Height="80"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="60"/>
            <ColumnDefinition />
            <ColumnDefinition Width="60"/>
        </Grid.ColumnDefinitions>
        <StackPanel Orientation="Horizontal" Grid.Column="1" TextBlock.FontSize="15" HorizontalAlignment="Center" Margin="0 10 0 0">
            <TextBlock Text="Неделя" />
            <TextBlock Text="{Binding WeekStart, StringFormat={}dd.MM}" Margin="5 0 0 0" />
            <TextBlock Text="-" Margin="5 0"/>
            <TextBlock Text="{Binding WeekEnd, StringFormat={}dd.MM.yyyy}" />
            <TextBlock Text="Ужины" Margin="10 0"/>
        </StackPanel>

        <StackPanel Orientation="Vertical" Grid.Column="1" Grid.Row="1" Visibility="{Binding CurrentWeek, Converter={StaticResource isNullConverter}}" VerticalAlignment="Center" HorizontalAlignment="Center" >
            <TextBlock Text="Для этой недели нет расписания" FontSize="25"/>
            <Button Command="{Binding CreateNewWeekCommand.Value}" Content="Создать расписание на неделю" Width="200" Margin="0 20 0 0"/>
        </StackPanel>

        <ScrollViewer Grid.Row="1" Grid.Column="1" Visibility="{Binding CurrentWeek, Converter={StaticResource isNotNullConverter}}" >
            <WrapPanel
              TextElement.FontSize="15"
              HorizontalAlignment="Center"
              VerticalAlignment="Top">
                <StackPanel Orientation="Vertical" Margin="10">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" >
                        <TextBlock Text="Понедельник" FontSize="20"/>
                        <Ellipse Height="15" 
                             Width="15" 
                             VerticalAlignment="Center" 
                             Margin="10 5 0 0">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding CurrentWeek.Monday.Dinner.CalorieType}" Value="0">
                                                <Setter Property="Fill" Value="Gray" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding CurrentWeek.Monday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Fitness}">
                                                <Setter Property="Fill" Value="Green" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding CurrentWeek.Monday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Protein}">
                                                <Setter Property="Fill" Value="Yellow" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding CurrentWeek.Monday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Bad}">
                                                <Setter Property="Fill" Value="Orange" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding CurrentWeek.Monday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Sweets}">
                                                <Setter Property="Fill" Value="Red" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                        </Ellipse>
                        <ToggleButton 
                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleToggleButtonStyle}" 
                                Width="24" 
                                Height="24"
                                Margin="5 5 0 0"
                                IsChecked="{Binding CurrentWeek.Monday.DinnerWasCooked}"
                                Foreground="LightGray">
                            <icons:PackIconModern Width="15"
                                  Height="10"
                                  Kind="Check" />
                        </ToggleButton>
                    </StackPanel>
                    <local:DayControl DataContext="{Binding CurrentWeek.Monday.Dinner}"/>
                </StackPanel>
                <StackPanel Orientation="Vertical" Width="200" Margin="10">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="Вторник" FontSize="20" />
                        <Ellipse Height="15" 
                                 Width="15" 
                                 VerticalAlignment="Center" 
                                 Margin="10 5 0 0">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentWeek.Tuesday.Dinner.CalorieType}" Value="0">
                                            <Setter Property="Fill" Value="Gray" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Tuesday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Fitness}">
                                            <Setter Property="Fill" Value="Green" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Tuesday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Protein}">
                                            <Setter Property="Fill" Value="Yellow" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Tuesday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Bad}">
                                            <Setter Property="Fill" Value="Orange" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Tuesday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Sweets}">
                                            <Setter Property="Fill" Value="Red" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <ToggleButton 
                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleToggleButtonStyle}" 
                                Width="24" 
                                Height="24"
                                Margin="5 5 0 0"
                                IsChecked="{Binding CurrentWeek.Tuesday.DinnerWasCooked}"
                                Foreground="LightGray">
                            <icons:PackIconModern Width="15"
                                  Height="10"
                                  Kind="Check" />
                        </ToggleButton>
                    </StackPanel>
                    <local:DayControl DataContext="{Binding CurrentWeek.Tuesday.Dinner}" />
                </StackPanel>
                <StackPanel Orientation="Vertical" Width="200" Margin="10">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="Среда" FontSize="20" />
                        <Ellipse Height="15" 
                                 Width="15" 
                                 VerticalAlignment="Center" 
                                 Margin="10 5 0 0">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentWeek.Wednesday.Dinner.CalorieType}" Value="0">
                                            <Setter Property="Fill" Value="Gray" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Wednesday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Fitness}">
                                            <Setter Property="Fill" Value="Green" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Wednesday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Protein}">
                                            <Setter Property="Fill" Value="Yellow" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Wednesday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Bad}">
                                            <Setter Property="Fill" Value="Orange" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Wednesday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Sweets}">
                                            <Setter Property="Fill" Value="Red" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <ToggleButton 
                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleToggleButtonStyle}" 
                                Width="24" 
                                Height="24"
                                Margin="5 5 0 0"
                                IsChecked="{Binding CurrentWeek.Wednesday.DinnerWasCooked}"
                                Foreground="LightGray">
                            <icons:PackIconModern Width="15"
                                  Height="10"
                                  Kind="Check" />
                        </ToggleButton>
                    </StackPanel>
                    <local:DayControl DataContext="{Binding CurrentWeek.Wednesday.Dinner}" />
                </StackPanel>
                <StackPanel Orientation="Vertical" Width="200" Margin="10">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="Четверг" FontSize="20" />
                        <Ellipse Height="15" 
                                 Width="15" 
                                 VerticalAlignment="Center" 
                                 Margin="10 5 0 0">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentWeek.Thursday.Dinner.CalorieType}" Value="0">
                                            <Setter Property="Fill" Value="Gray" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Thursday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Fitness}">
                                            <Setter Property="Fill" Value="Green" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Thursday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Protein}">
                                            <Setter Property="Fill" Value="Yellow" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Thursday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Bad}">
                                            <Setter Property="Fill" Value="Orange" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Thursday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Sweets}">
                                            <Setter Property="Fill" Value="Red" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <ToggleButton 
                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleToggleButtonStyle}" 
                                Width="24" 
                                Height="24"
                                Margin="5 5 0 0"
                                IsChecked="{Binding CurrentWeek.Thursday.DinnerWasCooked}"
                                Foreground="LightGray">
                            <icons:PackIconModern Width="15"
                                  Height="10"
                                  Kind="Check" />
                        </ToggleButton>
                    </StackPanel>
                    <local:DayControl DataContext="{Binding CurrentWeek.Thursday.Dinner}" />
                </StackPanel>
                <StackPanel Orientation="Vertical" Width="200" Margin="10">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="Пятница" FontSize="20" />
                        <Ellipse Height="15" 
                                 Width="15" 
                                 VerticalAlignment="Center" 
                                 Margin="10 5 0 0">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentWeek.Friday.Dinner.CalorieType}" Value="0">
                                            <Setter Property="Fill" Value="Gray" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Friday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Fitness}">
                                            <Setter Property="Fill" Value="Green" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Friday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Protein}">
                                            <Setter Property="Fill" Value="Yellow" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Friday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Bad}">
                                            <Setter Property="Fill" Value="Orange" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Friday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Sweets}">
                                            <Setter Property="Fill" Value="Red" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <ToggleButton 
                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleToggleButtonStyle}" 
                                Width="24" 
                                Height="24"
                                Margin="5 5 0 0"
                                IsChecked="{Binding CurrentWeek.Friday.DinnerWasCooked}"
                                Foreground="LightGray">
                            <icons:PackIconModern Width="15"
                                  Height="10"
                                  Kind="Check" />
                        </ToggleButton>
                    </StackPanel>
                    <local:DayControl DataContext="{Binding CurrentWeek.Friday.Dinner}" />
                </StackPanel>
                <StackPanel Orientation="Vertical" Width="200" Margin="10">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="Суббота" FontSize="20" />
                        <Ellipse Height="15" 
                                 Width="15" 
                                 VerticalAlignment="Center" 
                                 Margin="10 5 0 0">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentWeek.Saturday.Dinner.CalorieType}" Value="0">
                                            <Setter Property="Fill" Value="Gray" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Saturday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Fitness}">
                                            <Setter Property="Fill" Value="Green" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Saturday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Protein}">
                                            <Setter Property="Fill" Value="Yellow" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Saturday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Bad}">
                                            <Setter Property="Fill" Value="Orange" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Saturday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Sweets}">
                                            <Setter Property="Fill" Value="Red" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <ToggleButton 
                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleToggleButtonStyle}" 
                                Width="24" 
                                Height="24"
                                Margin="5 5 0 0"
                                IsChecked="{Binding CurrentWeek.Saturday.DinnerWasCooked}"
                                Foreground="LightGray">
                            <icons:PackIconModern Width="15"
                                  Height="10"
                                  Kind="Check" />
                        </ToggleButton>
                    </StackPanel>
                    <local:DayControl DataContext="{Binding CurrentWeek.Saturday.Dinner}" />
                </StackPanel>
                <StackPanel Orientation="Vertical" Width="200" Margin="10">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="Воскресенье" FontSize="20"/>
                        <Ellipse Height="15" 
                                 Width="15" 
                                 VerticalAlignment="Center" 
                                 Margin="10 5 0 0">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentWeek.Sunday.Dinner.CalorieType}" Value="0">
                                            <Setter Property="Fill" Value="Gray" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Sunday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Fitness}">
                                            <Setter Property="Fill" Value="Green" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Sunday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Protein}">
                                            <Setter Property="Fill" Value="Yellow" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Sunday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Bad}">
                                            <Setter Property="Fill" Value="Orange" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding CurrentWeek.Sunday.Dinner.CalorieType}" Value="{x:Static model:CalorieType.Sweets}">
                                            <Setter Property="Fill" Value="Red" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <ToggleButton 
                                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleToggleButtonStyle}" 
                                Width="24" 
                                Height="24"
                                Margin="5 5 0 0"
                                IsChecked="{Binding CurrentWeek.Sunday.DinnerWasCooked}"
                                Foreground="LightGray">
                            <icons:PackIconModern Width="15"
                                  Height="10"
                                  Kind="Check" />
                        </ToggleButton>
                    </StackPanel>
                    <local:DayControl DataContext="{Binding CurrentWeek.Sunday.Dinner}" />

                </StackPanel>
            </WrapPanel>
        </ScrollViewer>
        <StackPanel  Grid.Row="3"  Grid.Column="1"
                     Orientation="Horizontal" 
                     Visibility="{Binding CurrentWeek, Converter={StaticResource isNotNullConverter}}"
                     VerticalAlignment="Bottom" 
                     HorizontalAlignment="Center" 
                     Margin="0 0 0 20">
            <Button 
                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}" 
                Width="48" 
                Height="48"
                Foreground="Teal"
                Command="{Binding CreateShoppingListCommand.Value}" >
                <icons:FontAwesome Width="20"
                                  Height="20"
                                  Kind="ShoppingCartSolid" />
            </Button>
            <Button 
                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}" 
                Width="48" 
                Height="48"
                Margin="10 0 0 0"
                Foreground="Red"
                Command="{Binding DeleteCommand.Value}">
                <icons:PackIconModern Width="20"
                                  Height="20"
                                  Kind="Delete" />
            </Button>
        </StackPanel>

        <Button Grid.Row="1"
                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}" 
                Width="48" 
                Height="48"
                Foreground="Gray"
                VerticalAlignment="Center"
                Command="{Binding SelectPreviousWeekCommand.Value}" >
            <icons:FontAwesome Width="20"
                                  Height="20"
                                  Kind="ArrowLeftSolid" />
        </Button>

        <Button Grid.Row="1" Grid.Column="3"
                Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}" 
                Width="48" 
                Height="48"
                Foreground="Gray"
                VerticalAlignment="Center"
                Command="{Binding SelectNextWeekCommand.Value}" >
            <icons:FontAwesome Width="20"
                                  Height="20"
                                  Kind="ArrowRightSolid" />
        </Button>
    </Grid>
</UserControl>
